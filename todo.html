<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- Browser Title -->
<title>ğŸŒŸ Productivity Hub Pro - To-Do & Journal</title>


<style>
/* ---------------- CSS ---------------- */
body { font-family: 'Segoe UI', sans-serif; margin:0; padding:0; background: linear-gradient(135deg,#667eea,#764ba2); transition: background 0.5s, color 0.5s; }
body.dark { background: linear-gradient(135deg,#232526,#414345); color:white; }
.container { max-width:900px; margin:40px auto; padding:25px; background: rgba(255,255,255,0.95); border-radius:15px; box-shadow:0 10px 20px rgba(0,0,0,0.2); transition: background 0.5s, color 0.5s; }
body.dark .container { background: rgba(44,44,44,0.95); color:white; }
h1 { text-align:center; margin-bottom:10px; }
.tabs { display:flex; justify-content:space-around; margin-bottom:20px; }
.tab { padding:10px 20px; cursor:pointer; border-radius:10px; background:#eee; transition:0.3s; }
.tab.active { background:#667eea; color:white; font-weight:bold; }
body.dark .tab.active { background:#764ba2; }
.section { display:none; }
.section.active { display:block; }
.task-input, .journal-input { display:flex; margin-bottom:15px; flex-wrap: wrap; gap:5px; }
input, textarea, select { flex:1; padding:10px; border-radius:10px; border:1px solid #ccc; outline:none; font-size:15px; transition: transform 0.3s; }
input:focus, textarea:focus { transform: scale(1.02); }
button { margin-left:5px; padding:10px 15px; border:none; border-radius:10px; cursor:pointer; background:#667eea; color:white; transition:0.3s; }
button:hover { transform: scale(1.05); }
ul, .journal-entries { list-style:none; padding:0; }
li, .entry { padding:12px; margin-bottom:10px; background:#f9f9f9; border-radius:10px; display:flex; justify-content:space-between; align-items:center; border-left:5px solid #667eea; opacity:0; transform:translateX(-30px); animation: slideIn 0.5s forwards; }
body.dark li, body.dark .entry { background:#3b3b3b; }
li.completed span { text-decoration:line-through; color:gray; }
.entry { flex-direction:column; align-items:flex-start; }
.timestamp { font-size:12px; color:gray; }
body.dark .timestamp { color:#bbb; }
.buttons button { margin-left:5px; padding:5px 10px; border-radius:6px; }
.complete-btn { background:#28a745; color:white; }
.edit-btn { background:#ffc107; color:black; }
.delete-btn { background:#dc3545; color:white; }
@keyframes slideIn { to { opacity:1; transform:translateX(0); } }
.theme-btn { float:right; margin-top:-50px; padding:8px 12px; background:#ff9800; color:white; border-radius:8px; border:none; cursor:pointer; }
.theme-btn:hover { background:#e68900; }
.journal-settings { display:flex; justify-content:space-between; margin-bottom:10px; flex-wrap:wrap; gap:5px; }
.journal-settings select { flex:0.3; margin-right:5px; }
#calendarView { display:flex; flex-wrap:wrap; gap:5px; margin-top:15px; }
.calendar-cell { flex:1 1 14%; padding:8px; border-radius:5px; background:#eee; text-align:center; cursor:pointer; transition:0.3s; }
body.dark .calendar-cell { background:#444; color:white; }
.calendar-cell:hover { transform:scale(1.05); background:#667eea; color:white; }
</style>
</head>
<body>

<div class="container">
<h1>âœ¨ Productivity Hub Pro âœ¨</h1>
<button class="theme-btn" onclick="toggleTheme()">ğŸŒ™ Theme</button>

<div class="tabs">
  <div class="tab active" data-section="tasks">ğŸ“ To-Do</div>
  <div class="tab" data-section="journal">ğŸ“” Journal</div>
  <div class="tab" data-section="dashboard">ğŸ“Š Dashboard</div>
  <div class="tab" data-section="calendar">ğŸ“… Calendar</div>
</div>

<!-- TO-DO SECTION -->
<div id="tasks" class="section active">
  <div class="task-input">
    <input type="text" id="taskInput" placeholder="Add a task...">
    <select id="taskPriority">
      <option value="High">ğŸ”´ High</option>
      <option value="Medium">ğŸŸ¡ Medium</option>
      <option value="Low">ğŸŸ¢ Low</option>
    </select>
    <input type="date" id="taskDate">
    <select id="taskRepeat">
      <option value="None">No Repeat</option>
      <option value="Daily">Daily</option>
      <option value="Weekly">Weekly</option>
    </select>
    <button onclick="addTask()">Add</button>
    <button onclick="exportTasks('csv')">Export CSV</button>
    <button onclick="exportTasks('pdf')">Export PDF</button>
  </div>
  <h3>Pending Tasks</h3>
  <ul id="pendingList"></ul>
  <h3>Completed Tasks</h3>
  <ul id="completedList"></ul>
</div>

<!-- JOURNAL SECTION -->
<div id="journal" class="section">
  <div class="journal-settings">
    <select id="journalTheme" onchange="changeJournalTheme()">
      <option value="gradient1">ğŸŒ… Light Gradient</option>
      <option value="gradient2">ğŸŒŒ Dark Gradient</option>
      <option value="gradient3">ğŸŒ¸ Pink Gradient</option>
    </select>
    <select id="journalFont" onchange="changeJournalFont()">
      <option value="'Segoe UI', sans-serif">Segoe UI</option>
      <option value="'Georgia', serif">Georgia</option>
      <option value="'Courier New', monospace">Courier New</option>
      <option value="'Comic Sans MS', cursive">Comic Sans</option>
    </select>
    <select id="journalMood">
      <option value="ğŸ˜Š">ğŸ˜Š Happy</option>
      <option value="ğŸ˜”">ğŸ˜” Sad</option>
      <option value="ğŸ˜¡">ğŸ˜¡ Angry</option>
      <option value="ğŸ˜ƒ">ğŸ˜ƒ Excited</option>
    </select>
    <button onclick="exportJournal('csv')">Export CSV</button>
    <button onclick="exportJournal('pdf')">Export PDF</button>
  </div>
  <div class="journal-input">
    <textarea id="journalInput" placeholder="Write your thoughts..." rows="3"></textarea>
    <button onclick="addEntry()">Save</button>
  </div>
  <div class="journal-entries" id="journalEntries"></div>
</div>

<!-- DASHBOARD SECTION -->
<div id="dashboard" class="section">
  <h3>ğŸ“Š Dashboard</h3>
  <div id="taskSummary"></div>
  <div id="streakDisplay"></div>
</div>

<!-- CALENDAR SECTION -->
<div id="calendar" class="section">
  <h3>ğŸ“… Journal Calendar View</h3>
  <div id="calendarView"></div>
</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
// ---------------- Tabs ----------------
document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.section').forEach(sec=>sec.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.section).classList.add('active');
    if(tab.dataset.section==='calendar') renderCalendar();
  });
});

// ---------------- Theme ----------------
let darkMode = JSON.parse(localStorage.getItem("darkMode")) || false;
if(darkMode) document.body.classList.add("dark");
function toggleTheme(){
  document.body.classList.toggle("dark");
  darkMode = document.body.classList.contains("dark");
  localStorage.setItem("darkMode", JSON.stringify(darkMode));
}

// ---------------- Tasks ----------------
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
function renderTasks(){
  const pendingList=document.getElementById("pendingList");
  const completedList=document.getElementById("completedList");
  pendingList.innerHTML=""; completedList.innerHTML="";
  tasks.forEach((task,index)=>{
    const li=document.createElement("li");
    li.draggable=true;
    li.dataset.index=index;
    li.innerHTML=`<span>${task.priority==="High"?"ğŸ”´":task.priority==="Medium"?"ğŸŸ¡":"ğŸŸ¢"} ${task.text} (${task.date}) ${task.repeat!=="None"?`[${task.repeat}]`:''}</span>
      <div class="buttons">
        <button class="edit-btn" onclick="editTask(${index})">Edit</button>
        <button class="complete-btn" onclick="toggleComplete(${index})">${task.completed?'Undo':'Complete'}</button>
        <button class="delete-btn" onclick="deleteTask(${index})">Delete</button>
      </div>`;
    if(task.completed) completedList.appendChild(li);
    else pendingList.appendChild(li);
  });
  enableDragDrop();
  localStorage.setItem("tasks",JSON.stringify(tasks));
  updateDashboard();
}
function addTask(){
  const text=document.getElementById("taskInput").value.trim();
  if(text==="") return;
  const priority=document.getElementById("taskPriority").value;
  const date=document.getElementById("taskDate").value || new Date().toLocaleDateString();
  const repeat=document.getElementById("taskRepeat").value;
  tasks.push({text,priority,date,repeat,completed:false});
  document.getElementById("taskInput").value="";
  renderTasks();
}
function toggleComplete(i){ tasks[i].completed=!tasks[i].completed; renderTasks(); }
function deleteTask(i){ tasks.splice(i,1); renderTasks(); }
function editTask(i){ const t=prompt("Edit Task:",tasks[i].text); if(t){ tasks[i].text=t; renderTasks(); } }
function enableDragDrop(){
  const lists=[document.getElementById("pendingList"), document.getElementById("completedList")];
  lists.forEach(list=>{
    list.querySelectorAll('li').forEach(item=>{
      item.ondragstart=(e)=>{ e.dataTransfer.setData("text/plain", item.dataset.index); };
    });
    list.ondragover=(e)=>{ e.preventDefault(); };
    list.ondrop=(e)=>{
      e.preventDefault();
      const draggedIndex=e.dataTransfer.getData("text/plain");
      const targetIndex=[...list.children].indexOf(e.target.closest('li'));
      if(targetIndex<0) return;
      const draggedItem=tasks.splice(draggedIndex,1)[0];
      tasks.splice(targetIndex,0,draggedItem);
      renderTasks();
    };
  });
}

// ---------------- Journal ----------------
let journal=JSON.parse(localStorage.getItem("journal"))||[];
let journalContainer=document.getElementById("journalEntries");
let journalDiv=document.getElementById("journal");
function renderJournal(){
  journalContainer.innerHTML="";
  journal.forEach((entry,index)=>{
    const div=document.createElement("div");
    div.classList.add("entry");
    div.style.fontFamily=document.getElementById("journalFont").value;
    div.innerHTML=`<p>${entry.mood} ${entry.text}</p><span class="timestamp">${entry.date}</span>
      <div>
        <button class="edit-btn" onclick="editEntry(${index})">Edit</button>
        <button class="delete-btn" onclick="deleteEntry(${index})">Delete</button>
      </div>`;
    journalContainer.appendChild(div);
  });
  localStorage.setItem("journal",JSON.stringify(journal));
}
function addEntry(){
  const t=document.getElementById("journalInput").value.trim();
  const mood=document.getElementById("journalMood").value;
  if(t==="") return;
  journal.unshift({text:t,mood,date:new Date().toLocaleString()});
  document.getElementById("journalInput").value="";
  renderJournal();
  updateStreak();
}
function editEntry(i){ const t=prompt("Edit Entry:",journal[i].text); if(t){ journal[i].text=t; renderJournal(); } }
function deleteEntry(i){ journal.splice(i,1); renderJournal(); }
renderJournal();
function changeJournalTheme(){
  const val=document.getElementById("journalTheme").value;
  if(val==="gradient1") journalDiv.style.background="linear-gradient(135deg,#fdfbfb,#ebedee)";
  if(val==="gradient2") journalDiv.style.background="linear-gradient(135deg,#232526,#414345)";
  if(val==="gradient3") journalDiv.style.background="linear-gradient(135deg,#fddb92,#d1fdff)";
}
function changeJournalFont(){ renderJournal(); }
changeJournalTheme();

// ---------------- Dashboard ----------------
function updateDashboard(){
  const total=tasks.length;
  const completed=tasks.filter(t=>t.completed).length;
  const pending=total-completed;
  document.getElementById("taskSummary").innerHTML=`Total Tasks: ${total}, Pending: ${pending}, Completed: ${completed}`;
  updateStreak();
}

// ---------------- Streak Counter ----------------
function updateStreak(){
  let streak=JSON.parse(localStorage.getItem("streak"))||0;
  const today=new Date().toDateString();
  let lastDate=localStorage.getItem("lastEntryDate")||"";
  if(today!==lastDate && journal.length>0){
    streak++;
    localStorage.setItem("streak",streak);
    localStorage.setItem("lastEntryDate",today);
  }
  document.getElementById("streakDisplay").innerHTML=`ğŸ“ˆ Current Streak: ${streak} days`;
}

// ---------------- Calendar View ----------------
function renderCalendar(){
  const calendar=document.getElementById("calendarView");
  calendar.innerHTML="";
  const today=new Date();
  const daysInMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();
  for(let d=1; d<=daysInMonth; d++){
    const cell=document.createElement("div");
    cell.className="calendar-cell";
    cell.textContent=d;
    cell.onclick=()=>showEntriesForDay(d);
    calendar.appendChild(cell);
  }
}
function showEntriesForDay(day){
  const entries=journal.filter(e=>new Date(e.date).getDate()===day);
  if(entries.length===0) alert("No entries for this day");
  else alert(entries.map(e=>`${e.mood} ${e.text}`).join("\n"));
}

// ---------------- Export CSV/PDF ----------------
function exportTasks(type){
  if(type==='csv'){
    let csv="Task,Priority,Date,Repeat,Completed\n";
    tasks.forEach(t=>csv+=`${t.text},${t.priority},${t.date},${t.repeat},${t.completed}\n`);
    download("tasks.csv",csv);
  } else if(type==='pdf'){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.text("Tasks List",10,10);
    tasks.forEach((t,i)=>doc.text(`${i+1}. [${t.completed?"âœ”":" "}] ${t.text} (${t.priority}) ${t.date} ${t.repeat}`,10,20+i*10));
    doc.save("tasks.pdf");
  }
}
function exportJournal(type){
  if(type==='csv'){
    let csv="Mood,Text,Date\n";
    journal.forEach(j=>csv+=`${j.mood},${j.text},${j.date}\n`);
    download("journal.csv",csv);
  } else if(type==='pdf'){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.text("Journal Entries",10,10);
    journal.forEach((j,i)=>doc.text(`${i+1}. ${j.mood} ${j.text} (${j.date})`,10,20+i*10));
    doc.save("journal.pdf");
  }
}
function download(filename,text){
  const a=document.createElement("a");
  a.href="data:text/csv;charset=utf-8,"+encodeURIComponent(text);
  a.download=filename;
  a.click();
}
</script>
</body>
</html>
